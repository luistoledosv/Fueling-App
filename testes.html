<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Consumo de Combustível</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Adicione o seu CSS aqui */
  </style>
</head>

<body>

  <script>
    // Verifica se o usuário está autenticado
    if (!localStorage.getItem("user")) {
      window.location.replace("/Users/luistoledo/Desktop/ChatGPT Projetos/Consumo de Combustivel v2/Login/login.html");
    }
  </script>

  <h1>Consumo de Combustível</h1>
  <form id="fuelingForm">
    <label for="date">Data:</label><br>
    <input type="date" id="date" value="<?= date('Y-m-d') ?>"><br>
    <label for="tripA">Trip A:</label><br>
    <input type="number" id="tripA" min="0"><br>
    <label for="fuelAmount">Litros abastecidos:</label><br>
    <input type="number" id="fuelAmount" min="0"><br>
    <label for="cost">Valor pago:</label><br>
    <input type="number" id="cost" min="1" max="20" step="any"><br>
    <label for="fuelLocation">Local:</label><br>
    <input type="text" id="fuelLocation" min="0"><br><br>
    <input type="submit" value="Adicionar">
  </form>
  <table id="fuelingsTable">
    <thead>
      <tr>
        <th>Data</th>
        <th>Trip A</th>
        <th>Litros</th>
        <th>Valor</th>
        <th>Localização</th>
        <th>Consumo médio</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <div class="logout">
    <button id="logout-button">Logout</button>
  </div>
  <script>

    // Adicione o seu JavaScript aqui
    const form = document.getElementById('fuelingForm');
    const table = document.getElementById('fuelingsTable');

    let fuelings = JSON.parse(localStorage.getItem('fuelings')) || [];


    form.addEventListener('submit', event => {
      event.preventDefault();
      const date = form.elements.date.value;
      const tripA = form.elements.tripA.value;
      const fuelAmount = form.elements.fuelAmount.value;
      const cost = form.elements.cost.value;
      const costAmount = (cost * fuelAmount).toFixed(2);
      const fuelLocation = form.elements.fuelLocation.value;
      const consumption = (tripA / fuelAmount).toFixed(2);
      fuelings.push({ date, tripA, fuelAmount, costAmount, fuelLocation, consumption });
      localStorage.setItem('fuelings', JSON.stringify(fuelings));
      updateTable();
    });



    function updateTable() {
      table.tBodies[0].innerHTML = '';
      fuelings.forEach(fueling => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${fueling.date}</td>
          <td>${fueling.tripA} km</td>
          <td>${fueling.fuelAmount}L</td>
          <td>R$ ${fueling.costAmount}</td>
          <td>${fueling.fuelLocation}</td>
          <td>${fueling.consumption} km/l</td>
        `;
        table.tBodies[0].appendChild(row);
      });
    }


    // Logout do usuário
    function logout() {
      localStorage.removeItem('isAuthenticated');
      // Redirecione o usuário para a página de login
      window.location.href = '/Users/luistoledo/Desktop/ChatGPT Projetos/Consumo de Combustivel v2/Login/login.html';
    }
    document.querySelector('#logout-button').addEventListener('click', logout);



    updateTable();
  </script>
</body>

</html>